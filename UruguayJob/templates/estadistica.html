{% extends 'base.html' %}

{% block titulo %}
<title>Estadisticas</title>
{% endblock %}

{% block header %}
{% load static %}
<nav class="navbar navbar-toggleable-md navbar-expand-lg navbar-light  fixed-top bg-primary">
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		<a class="m-0 ml-3 p-0" href="/usuario">
			<img class="m-0 p-0" src="{% static 'img/logo.jpg' %}" alt="Logo"
				style="width:50px; height: 50px; border-radius: 30px;">
		</a>
		<div class="navbar ml-md-auto" style=" display: table-cell;">
			<a href="/entrevistas"><i class="fas fa-bell" style="width:30px"></i> Entrevistas</a>

			{% if isLoged %}
			<a href="/calculadora"><i class="fas fa-calculator" style="width:30px"></i>Calculadora</a>
			<a href="/hacerCV"><i class="fa fa-fw fa-envelope" style="width:30px"></i>
				Crear CV</a>
			<a href="/"><i class="fa fa-fw fa-user" style="width:30px; padding-right: 10px;"></i>
				Cerrar Sesion</a>
			{% else %}
			<a href="/iniciar-sesion"><i class="fa fa-fw fa-user" style="width:30px; padding-right: 10px;"></i>
				Iniciar sesión</a>
			<a href="/registrarse"><i class="fa fa-fw fa-user" style="width:30px; padding-right: 10px;"></i>
				Registrarme</a>
			{% endif %}
		</div>
	</div>
</nav>
{% endblock %}

{% block body %}
{% load static %}

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>


<style>
#container {
    height: 400px; 
}

.highcharts-figure, .highcharts-data-table table {
    min-width: 310px; 
    max-width: 800px;
    margin: 1em auto;
}

.highcharts-data-table table {
    font-family: Verdana, sans-serif;
    border-collapse: collapse;
    border: 1px solid #EBEBEB;
    margin: 10px auto;
    text-align: center;
    width: 100%;
    max-width: 500px;
}
.highcharts-data-table caption {
    padding: 1em 0;
    font-size: 1.2em;
    color: #555;
}
.highcharts-data-table th {
	font-weight: 600;
    padding: 0.5em;
}
.highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
    padding: 0.5em;
}
.highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
    background: #f8f8f8;
}
.highcharts-data-table tr:hover {
    background: #f1f7ff;
}


</style>
	

<br><br><br><br>

<div class="m-4">
	<h2>Estadísticas</h2>
	<div class="m-4">

		<figure class="highcharts-figure">
			<div id="container"></div>
			<p class="highcharts-description">
			</p>
		</figure>

    </div>
    
</div>

<script>
{% for dato in datos %}
'{{ dato.habilidad }}',
{% endfor %}


Highcharts.chart('container', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Sueldo Estimado por hr'
    },
    xAxis: {
        categories: [
                        {% for dato in datos %}
                            '{{ dato.habilidad }}'  ,
                        {% endfor %}
                    ]
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Sueldo estimado UYU/hr'
        }
    },
    tooltip: {
        pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
        shared: true
    },
    plotOptions: {
        column: {
            stacking: 'percent'
        }
    },
    series: [{
        name: 'Maximo Sueldo UYU/hr',
        data: [
                {% for dato in datos %}
                    {{ dato.SueldoMin }} ,
                {% endfor %}
        ]
    }, {
        name: 'Minimo Sueldo UYU/hr',
        data: [
                {% for dato in datos %}
                    {{ dato.SueldoMax }} ,
                {% endfor %}
        ]
    }]
});



</script>

{% endblock %}

{% block myScript %}
{% load static %}
<script src="{% static 'js/HighChart_lib.js' %}"></script>
{% endblock %}